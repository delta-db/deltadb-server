<html>
  <head>
    <title>Tests Reporter Output to File</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>
    <script src="../node_modules/mocha/mocha.js"></script>
    <script src="../node_modules/chai/chai.js"></script>
    <script>

      function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
      }

      mocha.ui('bdd');
      mocha.grep(getParameterByName('query')); // TODO: is this really needed as can just use ?grep= 
      mocha.reporter('html');
      expect = chai.expect;
    </script>
    <script src="new-test-bundle.js"></script>
    <script>
      console.log("Extraneous output that is not part of the reporter output")
      if (window.mochaPhantomJS) {
        mochaPhantomJS.run();
      } else {
        mocha.run();
      }
    </script>
  </body>
</html>

